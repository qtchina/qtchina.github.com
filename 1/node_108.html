
<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>linux 下第一个汇编程序</title>
</head>
<body>
<p>将下面的代码分别保存为 sasm.s, Makefile , 然后执行make可编译此汇编程序。输入 ./ta ，执行结果为: &quot;hello world&quot;</p><br />
<p>代码如下：</p><br />
<p>##############sasm.s</p><br />
<p>.section .data<br /><br />
hello:<br /><br />
&nbsp;&nbsp;&nbsp; .ascii &quot;hello worldn&quot;<br /><br />
.section .bss<br /><br />
.section .text<br /><br />
.globl _start<br /><br />
_start:<br /><br />
&nbsp;&nbsp;&nbsp; movl $4, %eax<br /><br />
&nbsp;&nbsp;&nbsp; movl $1, %ebx<br /><br />
&nbsp;&nbsp;&nbsp; movl $hello, %ecx<br /><br />
&nbsp;&nbsp;&nbsp; movl $12, %edx<br /><br />
&nbsp;&nbsp;&nbsp; int $0x80<br /><br />
&nbsp;&nbsp;&nbsp; <br /><br />
&nbsp;&nbsp;&nbsp; movl $1, %eax<br /><br />
&nbsp;&nbsp;&nbsp; movl $0, %ebx<br /><br />
&nbsp;&nbsp;&nbsp; int $0x80<br /><br />
<br /><br />
####################sasm.s</p><br />
<p>######################Makefile</p><br />
<p>all: ta<br /><br />
<br /><br />
ta: sasm.o<br /><br />
&nbsp;&nbsp;&nbsp; ld -o $@ $&lt;<br /><br />
<br /><br />
.s.o:<br /><br />
&nbsp;&nbsp;&nbsp; as&nbsp; --gstabs -o $@ $&lt;<br /><br />
&nbsp;&nbsp;&nbsp; <br /><br />
clean:<br /><br />
&nbsp;&nbsp;&nbsp; rm -fv *.o ta</p><br />
<p>######################Makefile</p><br />
<p>&nbsp;</p><br />
<p>下面给出汇编程序的模板，也就是最简单的汇编程序，什么也不做，启动立即退出：</p><br />
<p>##############tpl.s</p><br />
<p>.section .data<br /><br />
.section .bss<br /><br />
.section .text<br /><br />
.globl _start<br /><br />
_start:<br /><br />
&nbsp;&nbsp;&nbsp; movl $1, %eax<br /><br />
&nbsp;&nbsp;&nbsp; movl $0, %ebx<br /><br />
&nbsp;&nbsp;&nbsp; int $0x80<br /><br />
<br /><br />
##############tpl.s</p><br />
<p>说明：最后三条指令执行系统调用 exit(0)</p><br />
<p>注： 以上汇编语法使用 AT&amp;T 语法， 使用 gnu as 或者 gcc 编译。</p><br />
<p>&nbsp;</p>
</body>
</html>
