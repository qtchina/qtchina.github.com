
<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>在gentoo minimal 安装光盘中加入自己的文件</title>
</head>
<body>
最近一直使用自己安装的gentoo做桌面，做开发，写文档等日常工作，系统用起来已经很顺手了，想把它备份到光盘中去。

本想自己从头做一个启动光盘的，由于比较麻烦，就考虑修改gentoo的安装光盘，将自己的系统加到光盘中去，

以后使用此启动光盘，可以重新安装gentoo， 也可以把备份的gentoo直接拷贝到硬盘，稍加修改即能运行了。

把官方gentoo启动盘mount 一下。 
[code type="bash"]
mount -t iso9660 -o loop  install-x86-minimal-2008.0_beta2.iso /mnt/boot/
[/code]

转到做安装盘的目录：我的是 gentoo_install_cd
[code type="bash"]
cd /path/to/gentoo_install_cd
[/code]

将/mnt/boot/下面的文件拷贝过来
[code type="bash"]
cp -Rvp /mnt/boot/* .
[/code]

这时可以在这个目录中加入其他文件。最好不修改光盘有原有的目录。

在此目录下执行下面的命令，生成我们的启动光盘。
[code type="bash"]
mkisofs -JRTv -b boot/grub/stage2_eltorito -no-emul-boot -boot-load-size 8 -boot-info-table  -o  ../mygentoo.iso .
[/code]

生成了一个叫 ../mygentoo.iso 的光盘，原始大小60M，加入文件后随之相应变大。
先用虚拟机测试是否能正常启动，如果一切正常的，可以刻录光盘了。

OS: gentoo-2007-update kernel: 2.6.25-gentoo-r1
Desktop:  xfce 4.4

<li>最近更新：</li>
Gentoo 2008 正式版本发布。
Gentoo 2008 minimal install cd 正式版本的安装光盘有所变化，这里需要做点修改。

1. 将mount命令中的install-x86-minimal-2008.0_beta2.iso 改为 install-x86-minimal-2008.0.iso
2. mkisofs命令中的 -b boot/grub/stage2_eltorito 改为 -b isolinux/isolinux.bin 

其他步骤不变。

这次改变了引导程序，现在这个正式版使用的elilo 引导程序，而在beta2中使用的是grub.

</body>
</html>
