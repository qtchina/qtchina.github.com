<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>在苹果系统  xcode 上打包  qt4 应用程序</title>
<link rel="stylesheet" href="../css/base.css" type="text/css" />
</head>
<body>

<table width="80%" height="80 px" align="center">
  <tr>
    <td>
      <div id="branding"><strong><a href="/">
        <img src="../images/nullget_labs.gif" alt="www.qtchina.net " title="www.qtchina.net " id="logo" />
        <span>www.qtchina.net</span>            </a></strong></div>
      </div>
    </td>
  </tr>
</table>

<table width="80%" align="center">
  <tr>
    <td>
      <h2>在苹果系统  xcode 上打包  qt4 应用程序</h2>
    </td>
  </tr>

  <tr>
    <td>
      发布： 2010-03-30 11:55
    </td>
  </tr>

  <tr>
    <td width="50%">
      <br />
  苹果系统安装包上带一个工具  本，macdeployqt, 它能够将  qt  库与程序打包成一个 dmg 文件，在苹果系统可以直接双打击安装使用，像一个虚拟磁盘镜像一样，非常方便。<br />
<br />
如果是自己编译安装的 qt  包，需要在配置参加数的时候指定安装这个工具才行，否则默认情况下不安装这个工具。<br />
<br />
还有一点有问题，如何把图片资源打到这个包中。研究一下这个工具和  qt 开发文档。<br />
<br />
liuguangzhaos-macbook-pro:nullfxp-2.0.1 gzleo$ /usr/local/Trolltech/Qt-4.5.1/bin/macdeployqt <br />
Usage: macdeployqt app-bundle [options] <br />
 <br />
Options: <br />
   -no-plugins: Skip plugin deployment <br />
   -dmg       : Create a .dmg disk image <br />
   -no-strip  : Don't run 'strip' on the binaries <br />
 <br />
macdeployqt takes an application bundle as input and makes it <br />
self-contained by copying in the Qt frameworks and plugins that <br />
the application uses. <br />
 <br />
Plugins related to a framework are copied in with the <br />
framework. The accessibilty, image formats, and text codec <br />
plugins are always copied, unless "-no-plugins" is specified. <br />
 <br />
See the "Deploying an Application on Qt/Mac" topic in the <br />
documentation for more information about deployment on Mac OS X. <br />
<br />
<br />
<br />
打包实例：<br />
<br />
[code typ="bash"]<br />
<br />
localhost:nullfxp-svn gzleo$ macdeployqt bin/nullfxp.app/ -verbose=3 -dmg<br />
Log: Argument found: "-dmg" <br />
Log: Using otool: <br />
Log:  inspecting "bin/nullfxp.app/Contents/MacOS/nullfxp" <br />
Log: Adding framework: <br />
Log: Framework name "QtSql.framework" <br />
 Framework directory "/Library/Frameworks/" <br />
 Framework path "/Library/Frameworks/QtSql.framework" <br />
 Binary directory "Versions/4" <br />
 Binary name "QtSql" <br />
 Binary path "/Versions/4/QtSql" <br />
 Version "4" <br />
 Install name "QtSql.framework/Versions/4/QtSql" <br />
 Deployed install name "@executable_path/../Frameworks/QtSql.framework/Versions/4/QtSql" <br />
 Source file Path "/Library/Frameworks/QtSql.framework/Versions/4/QtSql" <br />
 Deployed Directory (relative to bundle) "Contents/Frameworks/QtSql.framework/Versions/4" <br />
 <br />
Log: Adding framework: <br />
Log: Framework name "QtGui.framework" <br />
 Framework directory "/Library/Frameworks/" <br />
 Framework path "/Library/Frameworks/QtGui.framework" <br />
 Binary directory "Versions/4" <br />
 Binary name "QtGui" <br />
 Binary path "/Versions/4/QtGui" <br />
 Version "4" <br />
 Install name "QtGui.framework/Versions/4/QtGui" <br />
 Deployed install name "@executable_path/../Frameworks/QtGui.framework/Versions/4/QtGui" <br />
 Source file Path "/Library/Frameworks/QtGui.framework/Versions/4/QtGui" <br />
 Deployed Directory (relative to bundle) "Contents/Frameworks/QtGui.framework/Versions/4" <br />
 <br />
Log: Adding framework: <br />
Log: Framework name "QtNetwork.framework" <br />
 Framework directory "/Library/Frameworks/" <br />
 Framework path "/Library/Frameworks/QtNetwork.framework" <br />
 Binary directory "Versions/4" <br />
 Binary name "QtNetwork" <br />
 Binary path "/Versions/4/QtNetwork" <br />
 Version "4" <br />
 Install name "QtNetwork.framework/Versions/4/QtNetwork" <br />
 Deployed install name "@executable_path/../Frameworks/QtNetwork.framework/Versions/4/QtNetwork" <br />
 Source file Path "/Library/Frameworks/QtNetwork.framework/Versions/4/QtNetwork" <br />
 Deployed Directory (relative to bundle) "Contents/Frameworks/QtNetwork.framework/Versions/4" <br />
 <br />
<br />
Log: Adding framework: <br />
Log: Framework name "QtCore.framework" <br />
 Framework directory "/Library/Frameworks/" <br />
 Framework path "/Library/Frameworks/QtCore.framework" <br />
 Binary directory "Versions/4" <br />
 Binary name "QtCore" <br />
 Binary path "/Versions/4/QtCore" <br />
 Version "4" <br />
 Install name "QtCore.framework/Versions/4/QtCore" <br />
 Deployed install name "@executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore" <br />
 Source file Path "/Library/Frameworks/QtCore.framework/Versions/4/QtCore" <br />
 Deployed Directory (relative to bundle) "Contents/Frameworks/QtCore.framework/Versions/4" <br />
 <br />
Log: <br />
Log: Deploying Qt frameworks found inside: "bin/nullfxp.app/Contents/PlugIns/sqldrivers/libqsqlpsql.dylib" <br />
Log: Using install_name_tool: <br />
Log:  in "bin/nullfxp.app/Contents/PlugIns/sqldrivers/libqsqlpsql.dylib" <br />
Log:  change reference "QtSql.framework/Versions/4/QtSql" <br />
Log:  to "@executable_path/../Frameworks/QtSql.framework/Versions/4/QtSql" <br />
Log: Using install_name_tool: <br />
Log:  in "bin/nullfxp.app/Contents/PlugIns/sqldrivers/libqsqlpsql.dylib" <br />
Log:  change reference "QtCore.framework/Versions/4/QtCore" <br />
Log:  to "@executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore" <br />
Log: Created configuration file: "bin/nullfxp.app/Contents/Resources/qt.conf" <br />
Log: This file sets the plugin search path to "bin/nullfxp.app/Contents/PlugIns" <br />
Log: <br />
Log: Creating disk image (.dmg) for "bin/nullfxp.app" <br />
localhost:nullfxp-svn gzleo$ ls<br />
AUTHORS			NEWS			nullfxp.pro<br />
CMakeLists.txt		README			nullfxp.xcodeproj<br />
COPYING			TODO			packages<br />
ChangeLog		bin			src<br />
Doxyfile		docs			tools<br />
INSTALL			install.pri<br />
Makefile		nullfxp.kdevelop<br />
localhost:nullfxp-svn gzleo$ ls bin/<br />
nullfxp.app	nullfxp.dmg	touch.exe	unitest.app<br />
localhost:nullfxp-svn gzleo$ ls bin/ -lh<br />
ls: -lh: No such file or directory<br />
bin/:<br />
nullfxp.app	nullfxp.dmg	touch.exe	unitest.app<br />
localhost:nullfxp-svn gzleo$ ls -lh bin/<br />
total 33832<br />
drwxr-xr-x  3 gzleo  staff   102B  3 30 11:29 nullfxp.app<br />
-rw-r--r--@ 1 gzleo  staff    16M  3 30 11:49 nullfxp.dmg<br />
-rw-r--r--  1 gzleo  staff    44K  3 27 22:44 touch.exe<br />
drwxr-xr-x  3 gzleo  staff   102B  3 30 11:43 unitest.app<br />
localhost:nullfxp-svn gzleo$ <br />
<br />
[/code]
    </td>
  </tr>
  <tr>
    <td>
      <br /><br />
      原文： <a href='http://nullget.sourceforge.net/?q=node/366'>http://nullget.sourceforge.net/?q=node/366</a>
    </td>
  </tr>

</table>

<p></p>
<p></p>
<p></p>
<table width="60%"><tr><td  align="center">
<div>
  <span>Powered by <a href="http://nullget.sourceforge.net">zexport</a></span>  </div>
</div>
</td></tr></table>

</body>
</html>
