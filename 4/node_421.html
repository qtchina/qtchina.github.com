
<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>在 Emacs 里面使用 Cscope</title>
</head>
<body>
<h2><a name="sec1" id="sec1"></a> <br />
简介</h2> <br />
 <br />
<p class="first">对于浏览源代码来说，在 <a href="Emacs.html">Emacs</a> 里面也有很多工具可用，比如自带的 etags 就<br />
不错，不过功能不如 Cscope 强大。 Cscope 并不像 etags 那样属于 Emacs ，<br />
它是一个独立的程序。它是一个具有完全 Unix 血统的程序，用于帮助开发人员<br />
浏览源代码。它最初(那还是 PDP-11 的时代)是由 Bell 实验室开发，并且多年<br />
以来一直是 AT&amp;T Unix 商业发行版的一部分。它已经被用于管理超过两千万行代<br />
码的工程。在2000年4月，多亏了 <a href="http://www.sco.com">Santa Cruz Operation, Inc. (SCO)</a> ，<br />
Cscope 的源代码在 BSD <a href="http://cscope.sourceforge.net/license.html">license</a> 下开放了源代码。</p> <br />
 <br />
<p>Cscope 的发行包里面有个 xcscope.el 能很好地用于 (X)Emacs 。它处于源代<br />
码包的 contrib/xcscope 目录下。该目录下面还有一个名为 cscope-indexer<br />
的脚本文件，用于处理源代码并不是在一个文件夹下面的情况。</p> <br />
 <br />
 <br />
<h2><a name="sec2" id="sec2"></a> <br />
安装和配置</h2> <br />
 <br />
<p class="first">首先到 <a href="http://cscope.sourceforge.net">Cscope 的主页</a> 上去下载最新的源代码包，编译安装。要在 Emacs 里面<br />
使用，首先必须把 xcscope.el 拷贝到 load-path 里面包含的目录里面。并在<br />
<code>~/.emacs</code> 里面加上 <code>(require 'xcscope)</code> 就可以了，或者，如果你希望在打开<br />
c 或者 c++ 文件的时候才加载 xcsope ，可以写：</p> <br />
 <br />
<pre class="example"> <br />
(add-hook 'c-mode-common-hook<br />
	  '(lambda ()<br />
	    (require 'xcscope)))<br />
</pre> <br />
 <br />
<p>如果源代码全部处于同一个目录下面，现在就可以使用了。否则，如果源代码有<br />
多层目录，或者其他地方还有附加的源代码，则需要 cscope-indexer 脚本。把<br />
那个脚本拷贝到系统 PATH 里面去(如 <code>/usr/bin/</code>)。如果所有的源代码以及子目<br />
录都是在同一个目录下面的，只要执行 <code>C-c s I(cscope-index-files)</code> 就可以<br />
生成 Cscope 的数据库，接下来就可以使用了。</p> <br />
 <br />
 <br />
<h2><a name="sec3" id="sec3"></a> <br />
使用简介</h2> <br />
 <br />
<p class="first">默认是的快捷键都是绑定到 <code>C-c s</code> 的前缀上面，如果嫌麻烦的话可以自己更改<br />
快捷键绑定。这是默认的用于查找的键绑定：</p> <br />
 <br />
<pre class="example"> <br />
C-c s s         Find symbol.<br />
C-c s d         Find global definition.<br />
C-c s g         Find global definition (alternate binding).<br />
C-c s G         Find global definition without prompting.<br />
C-c s c         Find functions calling a function.<br />
C-c s C         Find called functions (list functions called<br />
                from a function).<br />
C-c s t         Find text string.<br />
C-c s e         Find egrep pattern.<br />
C-c s f         Find a file.<br />
C-c s i         Find files #including a file.<br />
</pre> <br />
 <br />
<p>下面是在搜索到的结果之间切换用的快捷键：</p> <br />
 <br />
<pre class="example"> <br />
C-c s b         Display *cscope* buffer.<br />
C-c s B         Auto display *cscope* buffer toggle.<br />
C-c s n         Next symbol.<br />
C-c s N         Next file.<br />
C-c s p         Previous symbol.<br />
C-c s P         Previous file.<br />
C-c s u         Pop mark.<br />
</pre> <br />
 <br />
<p>更详细的使用说明请参见 xcscope.el 文件头部的注释。</p> 
</body>
</html>
