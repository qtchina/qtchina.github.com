<!DOCTYPE HTML>
<html>
    <head>
        <meta charset='utf8'>
        <title>js编写的语法高亮引擎</title>
        <meta name="Keywords" content="Qt5,C/C++,Linux,PHP,Web架构,高性能,分布式,NullGet,WebNullGet,qtchina,Qt,下载软件,多线程下载软件,多协议下载软件,MMS下载,RTSP下载,HTTP下载,HTTPS下载,FTP下载,分块下载,在线视频下载软件，流媒体下载软件,Qt 4,China,Qt 4 Solution,Qt 4 解决方案" />
        <meta name="robots" content="all" />
        <meta name="googlebot" content="all" /> 
        <link rel="stylesheet" href="../css/base.css" type="text/css" />
    </head>
<body>

<table width="80%" height="80 px" align="center">
  <tr>
    <td>
      <div id="branding"><strong><a href="/">
        <img src="../images/nullget_labs.gif" alt="www.qtchina.tk" title="www.qtchina.tk" id="logo" />
        <span>www.qtchina.net</span>            </a></strong></div>
      </div>
    </td>
  </tr>
</table>

<table width="80%" align="center">
  <tr>
    <td>
      <h2>js编写的语法高亮引擎</h2>
    </td>
  </tr>

  <tr>
    <td>
      发布： 2007-06-06 18:44
    </td>
  </tr>

  <tr>
    <td width="50%">
      <br />
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;<br />&lt;HTML&gt;<br />&lt;HEAD&gt;<br />&lt;TITLE&gt;HighLight&lt;/TITLE&gt;<br />&lt;META NAME="Generator" CONTENT="EditPlus"&gt;<br />&lt;META NAME="Author" CONTENT=""&gt;<br />&lt;META NAME="Keywords" CONTENT=""&gt;<br />&lt;META NAME="Description" CONTENT=""&gt;<br />&lt;/HEAD&gt;<br /><br />&lt;BODY&gt;<br />&lt;SCRIPT LANGUAGE="JavaScript"&gt;<br />&lt;!--<br /><br />/* <br /> **    ================================================================================================== <br /> **    类名：CLASS_HIGHLIGHT <br /> **    功能：语法高亮 <br /> **    示例： <br />     --------------------------------------------------------------------------------------------------- <br />               var xx        = new CLASS_HIGHLIGHT(code,syntax); <br />           <br />            document.getElementById("display").innerHTML = xx.highlight(); <br />      --------------------------------------------------------------------------------------------------- <br /> **    作者：ttyp <br /> **    邮件：ttyp@21cn.com <br /> **    日期：2005-7-31 <br /> **    ================================================================================================== <br /> **/ <br /> <br />function CLASS_HIGHLIGHT(code,syntax) <br />{<br />    //哈希表类<br />    function Hashtable()<br />    {<br />        this._hash        = new Object();<br />        this.add        = function(key,value){<br />                            if(typeof(key)!="undefined"){<br />                                if(this.contains(key)==false){<br />                                    this._hash[key]=typeof(value)=="undefined"?null:value;<br />                                    return true;<br />                                } else {<br />                                    return false;<br />                                }<br />                            } else {<br />                                return false;<br />                            }<br />                        }<br />        this.remove        = function(key){delete this._hash[key];}<br />        this.count        = function(){var i=0;for(var k in this._hash){i++;} return i;}<br />        this.items        = function(key){return this._hash[key];}<br />        this.contains    = function(key){return typeof(this._hash[key])!="undefined";}<br />        this.clear        = function(){for(var k in this._hash){delete this._hash[k];}}<br /><br />    }<br /><br />    //字符串转换为哈希表<br />    this.str2hashtable = function(key,cs){<br />                var _key    = key.split(/,/g);<br />        var _hash    = new Hashtable();<br />        var _cs        = true;<br /><br />        if(typeof(cs)=="undefined"){<br />            _cs = this._caseSensitive;<br />        } else {<br />            _cs = cs;<br />        }<br /><br />        for(var i in _key){<br />            if(_cs){<br />                _hash.add(_key[i]);<br />            } else {<br />                _hash.add((_key[i]+"").toLowerCase());<br />            }<br /><br />        }<br />        return _hash;<br />    }<br /><br />    //获得需要转换的代码<br />    this._codetxt        = code;<br /><br />    if(typeof(syntax)=="undefined"){<br />        syntax = "";<br />    }<br /><br /><br />    switch(syntax.toLowerCase())<br />    {<br />        case "sql":<br />            //是否大小写敏感<br />            this._caseSensitive    = false;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("COMMIT,DELETE,INSERT,LOCK,ROLLBACK,SELECT,TRANSACTION,READ,ONLY,WRITE,USE,ROLLBACK,SEGMENT,ROLE,EXCEPT,NONE,UPDATE,DUAL,WORK,COMMENT,FORCE,FROM,WHERE,INTO,VALUES,ROW,SHARE,MODE,EXCLUSIVE,UPDATE,ROW,NOWAIT,TO,SAVEPOINT,UNION,UNION,ALL,INTERSECT,MINUS,START,WITH,CONNECT,BY,GROUP,HAVING,ORDER,UPDATE,NOWAIT,IDENTIFIED,SET,DROP,PACKAGE,CREATE,REPLACE,PROCEDURE,FUNCTION,TABLE,RETURN,AS,BEGIN,DECLARE,END,IF,THEN,ELSIF,ELSE,WHILE,CURSOR,EXCEPTION,WHEN,OTHERS,NO_DATA_FOUND,TOO_MANY_ROWS,CURSOR_ALREADY_OPENED,FOR,LOOP,IN,OUT,TYPE,OF,INDEX,BINARY_INTEGER,RAISE,ROWTYPE,VARCHAR2,NUMBER,LONG,DATE,RAW,LONG RAW,CHAR,INTEGER,MLSLABEL,CURRENT,OF,DEFAULT,CURRVAL,NEXTVAL,LEVEL,ROWID,ROWNUM,DISTINCT,ALL,LIKE,IS,NOT,NULL,BETWEEN,ANY,AND,OR,EXISTS,ASC,DESC,ABS,CEIL,COS,COSH,EXP,FLOOR,LN,LOG,MOD,POWER,ROUND,SIGN,SIN,SINH,SQRT,TAN,TANH,TRUNC,CHR,CONCAT,INITCAP,LOWER,LPAD,LTRIM,NLS_INITCAP,NLS_LOWER,NLS_UPPER,REPLACE,RPAD,RTRIM,SOUNDEX,SUBSTR,SUBSTRB,TRANSLATE,UPPER,ASCII,INSTR,INSTRB,LENGTH,LENGTHB,NLSSORT,ADD_MONTHS,LAST_DAY,MONTHS_BETWEEN,NEW_TIME,NEXT_DAY,ROUND,SYSDATE,TRUNC,CHARTOROWID,CONVERT,HEXTORAW,RAWTOHEX,ROWIDTOCHAR,TO_CHAR,TO_DATE,TO_LABEL,TO_MULTI_BYTE,TO_NUMBER,TO_SINGLE_BYTE,DUMP,GREATEST,GREATEST_LB,LEAST,LEAST_UB,NVL,UID,USER,USERENV,VSIZE,AVG,COUNT,GLB,LUB,MAX,MIN,STDDEV,SUM,VARIANCE");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("");<br />            //标记<br />            this._tags            = this.str2hashtable("",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.?!;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable("'");<br />            //行注释字符<br />            this._lineComment    = "--";<br />            //转义字符<br />            this._escape        = "";<br />            //多行引用开始<br />            this._commentOn        = "/*";<br />            //多行引用结束<br />            this._commentOff    = "*/";<br />            //忽略词<br />            this._ignore        = ""; <br />               //是否处理标记<br />            this._dealTag        = false;<br />            break;<br />        case "c#":<br />            //是否大小写敏感<br />            this._caseSensitive    = true;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("abstract,as,base,bool,break,byte,case,catch,char,checked,class,const,continue,decimal,default,delegate,do,double,else,enum,event,explicit,extern,false,finally,fixed,float,for,foreach,get,goto,if,implicit,in,int,interface,internal,is,lock,long,namespace,new,null,object,operator,out,override,params,private,protected,public,readonly,ref,return,sbyte,sealed,short,sizeof,stackalloc,static,set,string,struct,switch,this,throw,true,try,typeof,uint,ulong,unchecked,unsafe,ushort,using,value,virtual,void,volatile,while");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("String,Boolean,DateTime,Int32,Int64,Exception,DataTable,DataReader");<br />            //标记<br />            this._tags            = this.str2hashtable("",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.?!;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable(""");<br />            //行注释字符<br />            this._lineComment    = "//";<br />            //转义字符<br />            this._escape        = "\";<br />            //多行引用开始<br />            this._commentOn        = "/*";<br />            //多行引用结束<br />            this._commentOff    = "*/";<br />            //忽略词<br />            this._ignore        = ""; <br />                           //是否处理标记<br />            this._dealTag        = false;<br />            break; <br />           case "java":<br />            //是否大小写敏感<br />            this._caseSensitive    = true;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("abstract,boolean,break,byte,case,catch,char,class,const,continue,default,do,double,else,extends,final,finally,float,for,goto,if,implements,import,instanceof,int,interface,long,native,new,package,private,protected,public,return,short,static,strictfp,super,switch,synchronized,this,throw,throws,transient,try,void,volatile,while");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("String,Boolean,DateTime,Int32,Int64,Exception,DataTable,DataReader");<br />            //标记<br />            this._tags            = this.str2hashtable("",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.?!;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable(""");<br />            //行注释字符<br />            this._lineComment    = "//";<br />            //转义字符<br />            this._escape        = "\";<br />            //多行引用开始<br />            this._commentOn        = "/*";<br />            //多行引用结束<br />            this._commentOff    = "*/";<br />            //忽略词<br />            this._ignore        = ""; <br />                   //是否处理标记<br />            this._dealTag        = false; <br />                       break; <br />           case "vbs":<br />        case "vb":<br />            //是否大小写敏感<br />            this._caseSensitive    = false;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("And,ByRef,ByVal,Call,Case,Class,Const,Dim,Do,Each,Else,ElseIf,Empty,End,Eqv,Erase,Error,Exit,Explicit,False,For,Function,Get,If,Imp,In,Is,Let,Loop,Mod,Next,Not,Nothing,Null,On,Option,Or,Private,Property,Public,Randomize,ReDim,Resume,Select,Set,Step,Sub,Then,To,True,Until,Wend,While,Xor,Anchor,Array,Asc,Atn,CBool,CByte,CCur,CDate,CDbl,Chr,CInt,CLng,Cos,CreateObject,CSng,CStr,Date,DateAdd,DateDiff,DatePart,DateSerial,DateValue,Day,Dictionary,Document,Element,Err,Exp,FileSystemObject,Filter,Fix,Int,Form,FormatCurrency,FormatDateTime,FormatNumber,FormatPercent,GetObject,Hex,Hour,InputBox,InStr,InstrRev,IsArray,IsDate,IsEmpty,IsNull,IsNumeric,IsObject,Join,LBound,LCase,Left,Len,Link,LoadPicture,Location,Log,LTrim,RTrim,Trim,Mid,Minute,Month,MonthName,MsgBox,Navigator,Now,Oct,Replace,Right,Rnd,Round,ScriptEngine,ScriptEngineBuildVersion,ScriptEngineMajorVersion,ScriptEngineMinorVersion,Second,Sgn,Sin,Space,Split,Sqr,StrComp,String,StrReverse,Tan,Time,TextStream,TimeSerial,TimeValue,TypeName,UBound,UCase,VarType,Weekday,WeekDayName,Year");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("String,Number,Boolean,Date,Integert,Long,Double,Single");<br />            //标记<br />            this._tags            = this.str2hashtable("",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.?!;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable(""");<br />            //行注释字符<br />            this._lineComment    = "'";<br />            //转义字符<br />            this._escape        = "";<br />            //多行引用开始<br />            this._commentOn        = "";<br />            //多行引用结束<br />            this._commentOff    = "";<br />            //忽略词<br />            this._ignore        = "&lt;!--"; <br />               //是否处理标记<br />            this._dealTag        = false;<br />            break;<br />        case "js":<br />            //是否大小写敏感<br />            this._caseSensitive    = true;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("function,void,this,boolean,while,if,return,new,true,false,try,catch,throw,null,else,int,long,do,var");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("String,Number,Boolean,RegExp,Error,Math,Date");<br />            //标记<br />            this._tags            = this.str2hashtable("",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.?!;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable("",'");<br />            //行注释字符<br />            this._lineComment    = "//";<br />            //转义字符<br />            this._escape        = "\";<br />            //多行引用开始<br />            this._commentOn        = "/*";<br />            //多行引用结束<br />            this._commentOff    = "*/";<br />            //忽略词<br />            this._ignore        = "&lt;!--";<br />            break;<br />        case "html":<br />            //是否大小写敏感<br />            this._caseSensitive    = true;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("function,void,this,boolean,while,if,return,new,true,false,try,catch,throw,null,else,int,long,do,var");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("String,Number,Boolean,RegExp,Error,Math,Date");<br />            //标记<br />            this._tags            = this.str2hashtable("html,head,body,title,style,script,language,input,select,div,span,button,img,iframe,frame,frameset,table,tr,td,caption,form,font,meta,textarea",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.?!;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable("",'");<br />            //行注释字符<br />            this._lineComment    = "//";<br />            //转义字符<br />            this._escape        = "\";<br />            //多行引用开始<br />            this._commentOn        = "/*";<br />            //多行引用结束<br />            this._commentOff    = "*/";<br />            //忽略词<br />            this._ignore        = "&lt;!--";<br />            //是否处理标记<br />            this._dealTag        = true;<br />            break;<br />        case "xml":<br />        default:<br />            //是否大小写敏感<br />            this._caseSensitive    = true;<br />            //得到关键字哈希表<br />            this._keywords        = this.str2hashtable("!DOCTYPE,?xml,script,version,encoding");<br />            //得到内建对象哈希表<br />            this._commonObjects = this.str2hashtable("");<br />            //标记<br />            this._tags            = this.str2hashtable("",false);<br />            //得到分割字符<br />            this._wordDelimiters= "　 ,.;:\/&lt;&gt;(){}[]"'rnt=+-|*%@#$^&";<br />            //引用字符<br />            this._quotation        = this.str2hashtable("",'");<br />            //行注释字符<br />            this._lineComment    = "";<br />            //转义字符<br />            this._escape        = "\";<br />            //多行引用开始<br />            this._commentOn        = "&lt;!--";<br />            //多行引用结束<br />            this._commentOff    = "--&gt;";<br />            //忽略词<br />            this._ignore        = "&lt;!--";<br />            //是否处理标记<br />            this._dealTag        = true;<br />            break;<br />    }<br /><br />        this.highlight    = function() {<br />        var codeArr = new Array();<br />        var word_index = 0;<br />        var htmlTxt = new Array();<br /><br />        //得到分割字符数组(分词)<br />        for (var i = 0; i &lt; this._codetxt.length; i++) {<br />            if (this._wordDelimiters.indexOf(this._codetxt.charAt(i)) == -1) {        //找不到关键字<br />                if (codeArr[word_index] == null || typeof(codeArr[word_index]) == 'undefined') {<br />                    codeArr[word_index] = "";<br />                }<br />                codeArr[word_index] += this._codetxt.charAt(i);<br />            } else {<br />                if (typeof(codeArr[word_index]) != 'undefined' && codeArr[word_index].length &gt; 0)<br />                    word_index++;<br />                codeArr[word_index++] = this._codetxt.charAt(i);<br />            } <br />        }<br /><br />        var quote_opened                = false;    //引用标记<br />        var slash_star_comment_opened    = false;    //多行注释标记<br />        var slash_slash_comment_opened    = false;    //单行注释标记<br />        var line_num                    = 1;        //行号<br />        var quote_char                    = "";        //引用标记类型<br />        var tag_opened                    = false;    //标记开始<br /><br />        htmlTxt[htmlTxt.length] = ("&lt;div style='font-family: Courier New;font-size:12px;overflow:auto;border-width:1px;border-style:solid;border-color:#8a8a8a;background-color:#eeeeee;margin:1px;padding:6px;'&gt;");<br /><br />        //按分割字，分块显示<br />        for (var i=0; i &lt;=word_index; i++){<br /><br />            //处理空行（由于转义带来）<br />            if(typeof(codeArr[i])=="undefined"||codeArr[i].length==0){<br />                continue;<br />            }<br />            //处理空格<br />            if (codeArr[i] == " "){ <br />                                                                                       htmlTxt[htmlTxt.length] = (" ");<br />            //处理关键字<br />            } else if (!slash_slash_comment_opened&&!slash_star_comment_opened && !quote_opened && this.isKeyword(codeArr[i])){ <br />                       htmlTxt[htmlTxt.length] = ("&lt;span style='color:#0000FF;'&gt;" + codeArr[i] + "&lt;/span&gt;");<br />            //处理普通对象<br />            } else if (!slash_slash_comment_opened&&!slash_star_comment_opened && !quote_opened && this.isCommonObject(codeArr[i])){ <br />                   htmlTxt[htmlTxt.length] = ("&lt;span style='color:#808000;'&gt;" + codeArr[i] + "&lt;/span&gt;");<br />            //处理标记<br />            } else if (!slash_slash_comment_opened&&!slash_star_comment_opened && !quote_opened && tag_opened && this.isTag(codeArr[i])){ <br />                   htmlTxt[htmlTxt.length] = ("&lt;span style='color:#0000FF;'&gt;" + codeArr[i] + "&lt;/span&gt;");<br />            //处理换行<br />            } else if (codeArr[i] == "n"){ <br />                                                                               if (slash_slash_comment_opened){<br />                    htmlTxt[htmlTxt.length] = ("&lt;/span&gt;"); <br />                       slash_slash_comment_opened = false;<br />                }<br />                htmlTxt[htmlTxt.length] = ("&lt;br/&gt;");<br />                line_num++;<br />            //处理双引号（引号前不能为转义字符） <br />               } else if (this._quotation.contains(codeArr[i])&&!slash_star_comment_opened&&!slash_slash_comment_opened){ <br />                                                       if (quote_opened){<br />                    //是相应的引号<br />                    if(quote_char==codeArr[i]){<br />                        if(tag_opened){<br />                            htmlTxt[htmlTxt.length] = (codeArr[i]+"&lt;/span&gt;&lt;span style='color:#808000;'&gt;"); <br />                                                   } else {<br />                            htmlTxt[htmlTxt.length] = (codeArr[i]+"&lt;/span&gt;");<br />                        }<br />                        quote_opened    = false;<br />                        quote_char        = "";<br />                    } else {<br />                        htmlTxt[htmlTxt.length] = codeArr[i].replace(/&lt;/g,"&lt;");<br />                    }<br />                } else {<br />                    if(tag_opened){<br />                        htmlTxt[htmlTxt.length] =  ("&lt;/span&gt;&lt;span style='color:#FF00FF;'&gt;"+codeArr[i]);<br />                    } else {<br />                        htmlTxt[htmlTxt.length] =  ("&lt;span style='color:#FF00FF;'&gt;"+codeArr[i]);<br />                    }<br />                    quote_opened    = true;<br />                    quote_char        = codeArr[i];<br />                } <br />                               //处理转义字符<br />            } else if(codeArr[i] == this._escape){ <br />                   htmlTxt[htmlTxt.length] = (codeArr[i]); <br />                if(i&lt;word_index-1){<br />                    if(codeArr[i+1].charCodeAt(0)&gt;=32&&codeArr[i+1].charCodeAt(0)&lt;=127){<br />                        htmlTxt[htmlTxt.length] = codeArr[i+1].substr(0,1); <br />                        codeArr[i+1] = codeArr[i+1].substr(1); <br />                                           }<br />                } <br />                       //处理Tab<br />            } else if (codeArr[i] == "t") { <br />                                           htmlTxt[htmlTxt.length] = ("    ");<br />            //处理多行注释的开始<br />            } else if (this.isStartWith(this._commentOn,codeArr,i)&&!slash_slash_comment_opened && !slash_star_comment_opened&&!quote_opened){ <br />                                                               slash_star_comment_opened = true;<br />                htmlTxt[htmlTxt.length] =  ("&lt;span style='color:#008000;'&gt;" + this._commentOn.replace(/&lt;/g,"&lt;"));<br />                i = i + this._commentOn.length-1; <br />                   //处理单行注释<br />            } else if (this.isStartWith(this._lineComment,codeArr,i)&&!slash_slash_comment_opened && !slash_star_comment_opened&&!quote_opened){ <br />                                                               slash_slash_comment_opened = true;<br />                htmlTxt[htmlTxt.length] =  ("&lt;span style='color:#008000;'&gt;" + this._lineComment);<br />                i = i + this._lineComment.length-1; <br />               //处理忽略词<br />            } else if (this.isStartWith(this._ignore,codeArr,i)&&!slash_slash_comment_opened && !slash_star_comment_opened&&!quote_opened){ <br />                                                               slash_slash_comment_opened = true;<br />                htmlTxt[htmlTxt.length] =  ("&lt;span style='color:#008000;'&gt;" + this._ignore.replace(/&lt;/g,"&lt;"));<br />                i = i + this._ignore.length-1; <br />                               //处理多行注释结束 <br />               } else if (this.isStartWith(this._commentOff,codeArr,i)&&!quote_opened&&!slash_slash_comment_opened){ <br />                                                       if (slash_star_comment_opened) {<br />                    slash_star_comment_opened = false;<br />                    htmlTxt[htmlTxt.length] =  (this._commentOff +"&lt;/span&gt;");<br />                    i = i + this._commentOff.length-1; <br />                       }<br />            //处理左标记<br />            } else if (this._dealTag&&!slash_slash_comment_opened && !slash_star_comment_opened&&!quote_opened&&codeArr[i] == "&lt;") { <br />                               htmlTxt[htmlTxt.length] = "&lt;&lt;span style='color:#808000;'&gt;";<br />                tag_opened    = true;<br />            //处理右标记<br />            } else if (this._dealTag&&tag_opened&&codeArr[i] == "&gt;") { <br />                                               htmlTxt[htmlTxt.length] = "&lt;/span&gt;&gt;";<br />                tag_opened    = false;<br />            //处理HTML转义符号<br />            } else if (codeArr[i] == "&") { <br />                                               htmlTxt[htmlTxt.length] = "&";<br />            } else {<br />                htmlTxt[htmlTxt.length] = codeArr[i].replace(/&lt;/g,"&lt;");<br />            }<br />                    }<br />        htmlTxt[htmlTxt.length] = ("&lt;/div&gt;");<br /><br />        return htmlTxt.join("");<br />    }<br /><br />    this.isStartWith = function(str,code,index){<br />        if(typeof(str)!="undefined"&&str.length&gt;0){<br />            for(var i=0;i&lt;str.length;i++){<br />                if(this._caseSensitive){<br />                    if(str.charAt(i)!=code[index+i]||(index+i&gt;=code.length)){<br />                        return false;<br />                    }<br />                } else {<br />                    if(str.charAt(i).toLowerCase()!=code[index+i].toLowerCase()||(index+i&gt;=code.length)){<br />                        return false;<br />                    }<br />                }<br />            }<br />            return true;<br />        } else {<br />            return false;<br />        }<br />    }<br />        this.isKeyword = function(val) { <br />               return this._keywords.contains(this._caseSensitive?val:val.toLowerCase());<br />    }<br /><br />    this.isCommonObject = function(val) {<br />        return this._commonObjects.contains(this._caseSensitive?val:val.toLowerCase());<br />    }<br /><br />    this.isTag = function(val) {<br />        return this._tags.contains(val.toLowerCase());<br />    }<br /><br />}<br /><br />function go()<br />{<br /><br />    var code    = document.getElementById("code").value;<br />    var syntax    = document.getElementById("syntax").value;<br /><br />    var xx        = new CLASS_HIGHLIGHT(code,syntax); <br />       var a        = new Date();<br /><br />    document.getElementById("display").innerHTML = xx.highlight();<br /><br />    alert("共花：" + (new Date().getTime()-a.getTime()) + "ms");<br /><br />}<br /><br />//--&gt;<br />&lt;/SCRIPT&gt;<br /><br />&lt;textarea id="code" rows=12 cols=60&gt;<br />//这是一个测试<br />function aa()<br />{<br />    alert("\as//ldfjl;asdk/*sd****f*/sdf,sdfs");<br />}<br /><br />&lt;/textarea&gt;<br />&lt;br&gt;<br />&lt;select id="syntax"&gt;<br />    &lt;option value="js"&gt;js&lt;/option&gt;<br />    &lt;option value="c#"&gt;c#&lt;/option&gt;<br />    &lt;option value="java"&gt;java&lt;/option&gt;<br />    &lt;option value="vbs"&gt;vbs&lt;/option&gt;<br />    &lt;option value="sql"&gt;sql&lt;/option&gt;<br />    &lt;option value="xml"&gt;xml&lt;/option&gt;<br />    &lt;option value="html"&gt;html&lt;/option&gt;<br />&lt;/select&gt;<br />&lt;input type=button value="go" onclick="go()"&gt;<br />&lt;span id="display"&gt;&lt;/span&gt;<br /><br />&lt;/BODY&gt;<br />&lt;/HTML&gt; <br /><br /><br /><br /><br /><br /><br /><br /><br />
    </td>
  </tr>
  <tr>
    <td>
      <br /><br />
      原文： <a href='http://qtchina.tk/?q=node/58'>http://qtchina.tk/?q=node/58</a>
    </td>
  </tr>

</table>

<p></p>
<p></p>
<p></p>
<table width="60%"><tr><td  align="center">
  <div>
    <span>Powered by <a href="http://qtchina.tk">zexport</a></span>  </div>
  </div>
  </td></tr></table>

<br />
<div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51467019-1', 'qtchina.github.io');
  ga('send', 'pageview');

</script>

</div>
</body>
</html>
