
<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>setrlimit用法中的一个问题</title>
</head>
<body>
今天安装测试fastdfs分布式文件系统，启动过程遇到一个setrlimit的问题，提示错误22,Invalid arguments。

经过多次尝试修改代码，才发现，在fastdfs的源代码中，调用setrlimit之前，只为limit.rlim_cur设置了值，没有正确设置limit.rlim_max的成员的值，调用后出现了这个问题。

修复过程就是加一行设置rlim_max成员值的语句。成功启动了fastdfs服务。

setrlimit调用用于在应用层动态调整程序可用的系统资源。

一般使用getrlimit获取当前可用系统资源，再根据此值按需要调整可用系统资源。

</body>
</html>
