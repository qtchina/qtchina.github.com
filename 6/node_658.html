<!DOCTYPE HTML>
<html>
    <head>
        <meta charset='utf8'>
        <title>centos6.2源码安装couchbase</title>
        <meta name="Keywords" content="Qt5,C/C++,Linux,PHP,Web架构,高性能,分布式,NullGet,WebNullGet,qtchina,Qt,下载软件,多线程下载软件,多协议下载软件,MMS下载,RTSP下载,HTTP下载,HTTPS下载,FTP下载,分块下载,在线视频下载软件，流媒体下载软件,Qt 4,China,Qt 4 Solution,Qt 4 解决方案" />
        <meta name="robots" content="all" />
        <meta name="googlebot" content="all" /> 
        <link rel="stylesheet" href="../css/base.css" type="text/css" />
    </head>
<body>

<table width="80%" height="80 px" align="center">
  <tr>
    <td>
      <div id="branding"><strong><a href="/">
        <img src="../images/nullget_labs.gif" alt="www.qtchina.net " title="www.qtchina.net " id="logo" />
        <span>www.qtchina.net</span>            </a></strong></div>
      </div>
    </td>
  </tr>
</table>

<table width="80%" align="center">
  <tr>
    <td>
      <h2>centos6.2源码安装couchbase</h2>
    </td>
  </tr>

  <tr>
    <td>
      发布： 2012-05-11 15:38
    </td>
  </tr>

  <tr>
    <td width="50%">
      <br />
首先，couchbase依赖的组件很多，一般的系统不会自动安装，<br />
<br />
并且许多依赖包都是官方repo中没有的，需要从第三方rpm下载站点下载安装。<br />
<br />
这些情况导致couchbase全编译比较麻烦，下面需要一步步仔细操作，<br />
<br />
预装包：<br />
<br />
pyrex<br />
<br />
repo-1.15版本<br />
<br />
snappy  数据压缩/解压缩库<br />
<br />
libtoolize<br />
<br />
libcurl, libcurl-devel<br />
<br />
erlang, 版本r14+<br />
<br />
v8, v8-devel, 版本为v8 3.8+<br />
<br />
icu, icu-devel<br />
<br />
python-2.x<br />
<br />
其中， erlang和snappy需要手动安装，无相应的rpm包。<br />
<br />
下载编译工作源代码：<br />
<br />
cd /serv/sources/<br />
<br />
git clone https://github.com/membase/manifest.git<br />
<br />
mkdir couchbase-git<br />
<br />
cd couchbase-git<br />
<br />
repo init -u ../manifest.git  -m branch-2.0.xml<br />
<br />
repo sync<br />
<br />
     同步以下几个子项目树(25个)：<br />
<br />
           git://github.com/couchbase/bucket_engine<br />
<br />
           git://github.com/couchbase/couchbase-examples<br />
<br />
           git://github.com/couchbase/couchbase-python-client<br />
<br />
           git://github.com/couchbase/couchdb<br />
<br />
           git://github.com/couchbase/couchdbx-app<br />
<br />
           git://github.com/couchbase/couchstore<br />
<br />
           git://github.com/couchbase/ep-engine<br />
<br />
           git://github.com/couchbase/geocouch<br />
<br />
           git://github.com/couchbase/gperftools<br />
<br />
           git://github.com/couchbase/libcbio<br />
<br />
           git://github.com/couchbase/libconflate<br />
<br />
           git://github.com/couchbase/libcouchbase<br />
<br />
           git://github.com/membase/libmemcached<br />
<br />
           git://github.com/couchbase/libvbucket<br />
<br />
           git://github.com/couchbase/mccouch<br />
<br />
           git://github.com/membase/membase-cli<br />
<br />
           git://github.com/membase/memcached<br />
<br />
           git://github.com/membase/memcachetest<br />
<br />
           git://github.com/couchbase/moxi<br />
<br />
           git://github.com/couchbase/portsigar<br />
<br />
           git://github.com/couchbase/sigar<br />
<br />
           git://github.com/couchbase/testrunner<br />
<br />
           git://github.com/couchbase/tlm<br />
<br />
           git://github.com/couchbase/workload-generator<br />
<br />
开始编译：<br />
<br />
make<br />
<br />
默认情况下，从源代码安装，所有包安装位置为$(pwd)/install<br />
<br />
编译参数为， --prefix=/root/couchbase-git/install<br />
<br />
可以定制化安装目录：<br />
<br />
make PREFIX=/opt/couchbase<br />
<br />
其他的couchbase编译变量，COUCHBASE_DEBUG_BUILD，COMPONETS，USE_TCMALLOC，<br />
<br />
PLEASE_BUILD_COUCH_DEPS，PLEASE_BUILD_COUCH_DEPS，couchdb_EXTRA_OPTIONS<br />
<br />
还可以通过设定环境变量CFLAGS, CPPFLAGS和LDFLAGS指定某些库的安装位置。<br />
<br />
竟然好不容易编译完成了，只在v8的一个enum选项值上有问题，<br />
<br />
可能是安装的v8版本与couchdb要求不一致造成的，看了一下couchbase的github上的v8项目，<br />
<br />
最新分支版本为3.8，所以应该使用接近v8 3.8的版本，而我安装的是v8 3.3.10版本。<br />
<br />

    </td>
  </tr>
  <tr>
    <td>
      <br /><br />
      原文： <a href='http://nullget.sourceforge.net/?q=node/658'>http://nullget.sourceforge.net/?q=node/658</a>
    </td>
  </tr>

</table>

<p></p>
<p></p>
<p></p>
<table width="60%"><tr><td  align="center">
  <div>
    <span>Powered by <a href="http://nullget.sourceforge.net">zexport</a></span>  </div>
  </div>
  </td></tr></table>

<br />
<div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51467019-1', 'qtchina.github.io');
  ga('send', 'pageview');

</script>

</div>
</body>
</html>
