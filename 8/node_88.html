
<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>第一章 开始（创建连接）</title>
</head>
<body>
<h3 style="margin: 12pt 0cm 3pt; text-indent: 0cm; line-height: 150%; tab-stops: 0cm"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial">创建连接</span></h3>
<p class="doctext" style="margin: 14pt 0cm; text-indent: 24pt; line-height: 150%; mso-char-indent-count: 2.0"><font size="3"><font face="宋体"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">第二个例子将向你展示怎样来回应用户的动作。这个应用程序包含了一个用户可以通过点击它来结束该应用程序的按钮。程序的源代码和上一个</span><span lang="EN-US"> Hello </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">实例的源代码类似，除了我们用一个</span> <tt><span lang="EN-US">QPushButton</span></tt><span lang="EN-US"> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">代替</span> <tt><span lang="EN-US">QLabel</span></tt><span lang="EN-US"> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">作为我们的主窗口物件，并且我们将连接一个用户动作（点击按钮）和一段程序代码。</span></font></font></p>
<p class="doctext" style="margin: 14pt 0cm; text-indent: 24pt; line-height: 150%; mso-char-indent-count: 2.0"><a name="iddle1462"></a><a name="iddle1580"></a><a name="iddle2312"></a><a name="iddle4039"></a><a name="iddle4598"></a><a name="iddle4775"></a><a name="iddle5421"></a><a name="iddle5423"></a><a name="iddle6291"></a><a name="iddle6310"></a><a name="iddle6357"></a><a name="iddle6375"><span style="mso-bookmark: iddle6357"><span style="mso-bookmark: iddle6310"><span style="mso-bookmark: iddle6291"><span style="mso-bookmark: iddle5423"><span style="mso-bookmark: iddle5421"><span style="mso-bookmark: iddle4775"><span style="mso-bookmark: iddle4598"><span style="mso-bookmark: iddle4039"><span style="mso-bookmark: iddle2312"><span style="mso-bookmark: iddle1580"><span style="mso-bookmark: iddle1462"><font size="3"><font face="宋体"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">这个程序的源代码可以在随书赠送的</span><span lang="EN-US"> CD </span></font></font></span></span></span></span></span></span></span></span></span></span></span></a><font size="3"><font face="宋体"><span style="mso-bookmark: iddle6375"><span style="mso-bookmark: iddle6357"><span style="mso-bookmark: iddle6310"><span style="mso-bookmark: iddle6291"><span style="mso-bookmark: iddle5423"><span style="mso-bookmark: iddle5421"><span style="mso-bookmark: iddle4775"><span style="mso-bookmark: iddle4598"><span style="mso-bookmark: iddle4039"><span style="mso-bookmark: iddle2312"><span style="mso-bookmark: iddle1580"><span style="mso-bookmark: iddle1462"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">的这个文件中获得</span> </span></span></span></span></span></span></span></span></span></span></span></span><tt><span lang="EN-US">/examples/chap01/quit/quit.cpp</span></tt><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">。下面是这个文件的内容：</span></font></font></p>
<pre style="line-height: 150%"><span lang="EN-US"><font size="3"><font face="宋体"><span style="mso-spacerun: yes">&nbsp;</span>1 #include &lt;QApplication&gt;</font></font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 2 #include &lt;QPushButton&gt;</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 3 int main (int argc, char *argv[])</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 4 {</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 5<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>QApplication app (argc, argv);</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 6<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>QPushButton *button = new QPushButton (&quot;Quit&quot;);</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 7<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>QObject::connect (button, SIGNAL (clicked ()),</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 8<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&amp;app, SLOT (quit()));</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3"> 9<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>button-&gt;show ();</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3">10<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>return app.exec ();</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3">11 }</font></span></pre>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: 150%"><span lang="EN-US"><o:p><font face="Times" size="3">&nbsp;</font></o:p></span></p>
<p class="doctext" style="margin: 14pt 0cm; text-indent: 24pt; line-height: 150%; mso-char-indent-count: 2.0"><font size="3"><font face="宋体"><span lang="EN-US">Qt </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">的物件发出信号说明一个用户的动作或者一个状态改变发生了。</span><span lang="EN-US"><a href="mk:@MSITStore:E:%5CMyDocuments%5CStudy%5CSystem%20&amp;%20App%20programing%5C(Qt)Prentice.Hall.PTR.C.plus.plus.GUI.Programming.with.Qt.4.Jun.2006.chm::/0131872494/ch01lev1sec2.html#ch01fn2%23ch01fn2"><span style="mso-field-code: ' HYPERLINK 'mk:@msitstore:e:MyDocumentsStudySystem &amp; App programing(qt)prentice.hall.ptr.c.plus.plus.gui.programming.with.qt.4.jun.2006.chm::/0131872494/ch01lev1sec2.html'l Ȭh01fn2%23ch01fn2''"><span style="mso-field-code: ' HYPERLINK 'mk:@msitstore:e:MyDocumentsStudySystem &amp; App programing(qt)prentice.hall.ptr.c.plus.plus.gui.programming.with.qt.4.jun.2006.chm::/0131872494/ch01lev1sec2.html'l Ȭh01fn2%23ch01fn2''">[*]</span></span></a> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">例如</span><span lang="EN-US">,</span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">当用户点击按钮后</span> <tt><span lang="EN-US">QPushButton</span></tt><span lang="EN-US"> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">物件发出一个</span> <tt><span lang="EN-US">clicked ()</span></tt><span lang="EN-US"> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">信号。一个信号可以被用来连接一个函数（这个函数在</span><span lang="EN-US"> Qt </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">中就被称为槽），所以当这个信号被发出时，这个槽就会自动地执行。</span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">在我们的实例中，我们将按钮物件发出的</span><span style="mso-ansi-language: #00FF"> click () </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">信号连接到</span><span style="mso-ansi-language: #00FF"> QApplication </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">物件的</span><span style="mso-ansi-language: #00FF"> quit () </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">槽上。</span><tt><span style="mso-ansi-language: #00FF">SIGNAL()</span></tt><span style="mso-ansi-language: #00FF"> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">和</span><span style="mso-ansi-language: #00FF"> </span><tt><span style="mso-ansi-language: #00FF">SLOT()</span></tt><span style="mso-ansi-language: #00FF"> </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">宏指令是</span><span style="mso-ansi-language: #00FF"> Qt </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">语法的一部分；我们将在下一章对它们进行详细解释。</span><span style="mso-ansi-language: #00FF"> <o:p></o:p></span></font></font></p>
<p class="docfootnote" style="margin: 14pt 0cm; text-indent: 24pt; line-height: 150%; mso-char-indent-count: 2.0"><a name="ch01fn2"><sup><span style="mso-ansi-language: #00FF"><font face="宋体" size="3">[*]</font></span></sup></a><font size="3"><font face="宋体"><span style="mso-ansi-language: #00FF"> Qt </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">的信号和</span><span style="mso-ansi-language: #00FF"> Unix </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体; mso-ansi-language: #00FF">的信号不一样。</span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">在本书中，我们只关心</span><span lang="EN-US"> Qt </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">的信号。</span></font></font></p>
<h5 style="margin: 12pt 0cm 3pt; text-indent: 0cm; line-height: 150%; text-align: center; tab-stops: 0cm" align="center"><a name="ch01fig03"><em><font size="4"><font face="Times"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: Times; mso-hansi-font-family: Times">图</span><span lang="EN-US"> 1.3. The Quit application</span></font></font></em></a></h5>
<p class="doctext" style="margin: 14pt 0cm; line-height: 150%; text-align: center" align="center"><span lang="EN-US"><v:shapetype id="_x0000_t75" stroked="f" filled="f" path="m@4@5l@4@11@9@11@9@5xe" o:preferrelative="t" o:spt="75" coordsize="21600,21600"><v:stroke joinstyle="miter"></v:stroke><v:formulas><v:f eqn="if lineDrawn pixelLineWidth 0"></v:f><v:f eqn="sum @0 1 0"></v:f><v:f eqn="sum 0 0 @1"></v:f><v:f eqn="prod @2 1 2"></v:f><v:f eqn="prod @3 21600 pixelWidth"></v:f><v:f eqn="prod @3 21600 pixelHeight"></v:f><v:f eqn="sum @0 0 1"></v:f><v:f eqn="prod @6 1 2"></v:f><v:f eqn="prod @7 21600 pixelWidth"></v:f><v:f eqn="sum @8 21600 0"></v:f><v:f eqn="prod @7 21600 pixelHeight"></v:f><v:f eqn="sum @10 21600 0"></v:f></v:formulas><v:path o:connecttype="rect" gradientshapeok="t" o:extrusionok="f"></v:path><o:lock aspectratio="t" v:ext="edit"></o:lock></v:shapetype><v:shape id="_x0000_i1025" style="width: 76.5pt; height: 39.75pt" type="#_x0000_t75" filled="t"><em><font size="4"><font face="Times"><v:fill color2="black"></v:fill><v:imagedata o:title="" src="file:///C:DOCUME~1ADMINI~1LOCALS~1Tempmsohtml1�1clip_image001.png"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial"><img class="" height="53" width="102" alt="" src="/upfile/image/quit.jpg" /></span></v:imagedata></font></font></em></v:shape></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: 150%"><span lang="EN-US"><o:p><font face="Times" size="3">&nbsp;</font></o:p></span></p>
<p class="doctext" style="margin: 14pt 0cm; text-indent: 24pt; line-height: 150%; mso-char-indent-count: 2.0"><font size="3"><font face="宋体"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">我们现在将编译这个程序。我们假设你已经创建了一个名为</span><span lang="EN-US"> quit </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">的目录保存</span><span lang="EN-US">quit.cpp </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">文件。在这个目录下执行</span><span lang="EN-US"> qmake </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">命令生成工程文件，然后再次运行这个命令生成一个</span><span lang="EN-US"> makefile </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">文件，命令如下：</span></font></font></p>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3">qmake -project</font></span></pre>
<pre style="line-height: 150%"><span lang="EN-US"><font face="宋体" size="3">qmake quit.pro</font></span></pre>
<p class="doctext" style="margin: 14pt 0cm; text-indent: 24pt; line-height: 150%; mso-char-indent-count: 2.0"><font size="3"><font face="宋体"><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">现在编译这个应用程序，运行它。如果你点击</span><span lang="EN-US"> Quit </span><span style="font-family: 文鼎PL细上海宋Uni; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体">按钮，程序将终止。</span></font></font></p>
</body>
</html>
