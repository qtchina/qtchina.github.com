
<!DOCTYPE HTML>
<html>
<head>
<meta charset='utf8'>
<title>Windows XP 下 mingw qt 4.3.2 开发环境的搭建</title>
</head>
<body>
<h3>1. 安装mingw/msys基本环境</h3>
<p>这个环境包含了unix环境开发中用到编译器和基本构建工具，如automake,autoconf等。请注意我们在这一节中下载的所有包指的都是二进制的包。</p>
<p><strong>mingw</strong><br />
下载　<a href="http://downloads.sourceforge.net/mingw/MinGW-5.1.3.exe?modtime=1168811236&amp;big_mirror=1" mce_href="http://downloads.sourceforge.net/mingw/MinGW-5.1.3.exe?modtime=1168811236&amp;big_mirror=1">mingw-5.1.3.exe</a><br />
选择E:crossmingw作为安装目录。选择&quot;candidate&quot;包并选中g++。</p>
<p>下载  <a href="http://downloads.sourceforge.net/mingw/MSYS-1.0.10.exe?modtime=1079444447&amp;big_mirror=1" mce_href="http://downloads.sourceforge.net/mingw/MSYS-1.0.10.exe?modtime=1079444447&amp;big_mirror=1">msys-1.0.exe</a><br />
选择 E:crossmsys作为安装目录，其他选项默认即可。</p>
<p><strong>MSYS Developer Toolkit</strong><br />
下载　<a href="http://downloads.sourceforge.net/mingw/msysDTK-1.0.1.exe?modtime=1041430674&amp;big_mirror=1" mce_href="http://downloads.sourceforge.net/mingw/msysDTK-1.0.1.exe?modtime=1041430674&amp;big_mirror=1">MSYS-DTK </a>  并把它也安装到 E:/cross/msys目录下。</p>
<p><strong>Autotools</strong><br />
下载　<a href="http://downloads.sourceforge.net/mingw/msys-libtool-1.5.tar.bz2?modtime=1074608342&amp;big_mirror=1" mce_href="http://downloads.sourceforge.net/mingw/msys-libtool-1.5.tar.bz2?modtime=1074608342&amp;big_mirror=1">Libtool</a>　　<a href="http://downloads.sourceforge.net/mingw/msys-autoconf-2.59.tar.bz2?modtime=1074694598&amp;big_mirror=1" mce_href="http://downloads.sourceforge.net/mingw/msys-autoconf-2.59.tar.bz2?modtime=1074694598&amp;big_mirror=1">Autoconf</a>　<a href="http://downloads.sourceforge.net/mingw/msys-automake-1.8.2.tar.bz2?modtime=1074694644&amp;big_mirror=1" mce_href="http://downloads.sourceforge.net/mingw/msys-automake-1.8.2.tar.bz2?modtime=1074694644&amp;big_mirror=1">Automake</a>　　的最新版本，使用解压软件解压到 E:/cross/msys目录下。</p>
<p>2.  准备启动 msys 系统<br />
使用任何文本编译器编译　E:/cross/msys/etc/fstab 文件，加入下面一行：<br />
e:/cross/mingw /mingw<br />
这样我们安装的msys系统就可以使用　　安装在 E:/cross/mingw目录下的命令，工具，和库了。</p>
<h3>2. 几个基本库安装　，　libiconv   , gettext , libgpg-error,libgcrypt</h3>
<p>现在在桌面上应该有一个MSYS的快捷方式，启动MSYS.</p>
<p>下载　<a href="http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.11.tar.gz" mce_href="http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.11.tar.gz">libiconv-1.11.tar.gz</a>  到 E:/cross/msys/home目录<br />
cd /home<br />
tar zxvf libiconv-1.11.tar.gz &amp;&amp; cd libiconv-1.11<br />
./configure --prefix=/mingw --disable-shared --enable-static<br />
make &amp;&amp; make install</p>
<p>下载   <a href="ftp://ftp.gnu.org/gnu/gettext/gettext-0.16.1.tar.gz" mce_href="ftp://ftp.gnu.org/gnu/gettext/gettext-0.16.1.tar.gz">gettext-0.16.1.tar.gz</a>  以及补丁文件　<a href="http://cvs.savannah.gnu.org/viewvc/gettext/gettext-runtime/intl/localename.c?root=gettext&amp;r1=1.15&amp;r2=1.16&amp;view=patch" mce_href="http://cvs.savannah.gnu.org/viewvc/gettext/gettext-runtime/intl/localename.c?root=gettext&amp;r1=1.15&amp;r2=1.16&amp;view=patch">http://cvs.savannah.gnu.org/viewvc/gettext/gettext-runtime/intl/localename.c?root=gettext&amp;r1=1.15&amp;r2=1.16&amp;view=patch</a>　到 e:/corss/msys/home 目录下<br />
cd /home<br />
tar zxvf gettext-0.16.1.tar.gz<br />
cd gettext-0.16.1/gettext-runtime/intl<br />
patch -i ../localename.c.patch<br />
cd ../..<br />
./configure --prefix=/mingw --disable-shared --enable-static<br />
make &amp;&amp; make install</p>
<p>下载 <a href="ftp://ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.5.tar.bz2" mce_href="ftp://ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.5.tar.bz2">libgpg-error-1.5.tar.bz2</a>  和　补丁　<a href="http://filezilla-project.org/codesquid/w32-gettext.c.patch" mce_href="http://filezilla-project.org/codesquid/w32-gettext.c.patch">http://filezilla-project.org/codesquid/w32-gettext.c.patch</a> 到 e:/cross/home 目录下</p>
<p>cd libgpg-error-1.5<br />
patch -i ../w32-gettext.c.patch -p0<br />
./configure --prefix=/mingw --disable-shared --enable-static<br />
make &amp;&amp; make install</p>
<p>下载&nbsp;  <a href="ftp://ftp.gnupg.org/gcrypt/libgcrypt/libgcrypt-1.2.4.tar.gz" class="external free" title="ftp://ftp.gnupg.org/gcrypt/libgcrypt/libgcrypt-1.2.4.tar.gz" rel="nofollow">ftp://ftp.gnupg.org/gcrypt/libgcrypt/libgcrypt-1.2.4.tar.gz</a> 和<a href="http://filezilla-project.org/codesquid/libgcrypt.patch" class="external free" title="http://filezilla-project.org/codesquid/libgcrypt.patch" rel="nofollow">http://filezilla-project.org/codesquid/libgcrypt.patch</a><span class="external free">&nbsp;&nbsp; 到e:/cross/home 目录</span></p>
<p>解压libgcrypt-1.2.4.tar.gz</p>
<p>cd libgcrypt-1.2.4</p>
<pre>patch -p0 -i ../libgcrypt.patch</pre>
<p>&nbsp;echo &quot;int main() { return 0; }&quot; &gt; tests/random.c</p>
<pre>./configure --disable-shared --enable-static --disable-nls --disable-asm</pre>
<pre>make &amp;&amp; make install</pre>
<h3>3. qt 4.3.2 编译安装</h3>
<pre>下载　<a mce_href="ftp://ftp.trolltech.com/qt/source/qt-win-opensource-src-4.3.2.zip" href="ftp://ftp.trolltech.com/qt/source/qt-win-opensource-src-4.3.2.zip">ftp://ftp.trolltech.com/qt/source/qt-win-opensource-src-4.3.2.zip</a></pre>
<pre>将这个包解压到 e:/qt</pre>
<pre>启动一个cmd窗口，确定 e:crossmingw在PATH中。&nbsp;</pre>
<pre>cd e:/qt/qt-win-opensource-src-4.3.2</pre>
<pre>configure -release -fast -qt-gif -qt-style-windowsxp -no-qt3support -platform win32-g++ -make mingw32-make</pre>
<pre>这一步配置Qt 编译相关选项，并生成qmake.exe 工具。</pre>
<pre>接下来执行：</pre>
<pre>make</pre>
<pre>ls -l bin/</pre>
<pre>将看到编码好的DLL库文件，开发库 .a 文件在 lib/ 目录下面。</pre>
<pre>&nbsp;</pre>
<p>&nbsp;现在 mingw 环境下 Qt 4 开发的基本系统已经安装完成了，如果你还需要其他的库，可以按照上面的方法试着安装。</p>
</body>
</html>
