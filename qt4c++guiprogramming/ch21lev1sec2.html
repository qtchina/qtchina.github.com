<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Customizing Qtopia Core</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch21lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=app01.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch21lev1sec2"></a>
<h3 id="title-IDAFFZKV" class="docSection1Title">Customizing Qtopia Core</h3>
<p class="docText">When installing Qtopia Core, we can specify features we want to leave out to reduce its memory footprint. Qtopia Core includes over a hundred configurable features, each of which is associated to a preprocessor symbol. For example, <tt>QT_NO_FILEDIALOG</tt> excludes <tt>QFileDialog</tt> from the <span class="docEmphasis">QtGui</span> library, and <tt>QT_NO_I18N</tt> leaves out all support for internationalization. The features are listed <tt>src/corelib/qfeatures.txt</tt>.</p>
<p class="docText">Qtopia Core provides five example configurations (<tt>minimum</tt>, <tt>small</tt>, <tt>medium</tt>, <tt>large</tt>, and <tt>dist</tt>) that are stored in <tt>src/corelib/qconfig_xxx.h</tt> files. These configu-rations can be specified using the <tt>configure</tt> script's <tt>-qconfig xxx</tt> option, for example:</p>
<div class="docText"><pre>
./configure -qconfig small
</pre></div><br>
<p class="docText">To create custom configurations, we can manually provide a <tt>qconfig-xxx.h</tt> file and use it as if it were a standard configuration. Alternatively, we can use the <tt>qconfig</tt> graphical tool, located in Qt's <tt>tools</tt> subdirectory.</p>
<p class="docText"><a name="iddle1256"></a><a name="iddle1549"></a><a name="iddle1863"></a><a name="iddle1961"></a><a name="iddle2068"></a><a name="iddle2070"></a><a name="iddle2072"></a><a name="iddle2169"></a><a name="iddle2171"></a><a name="iddle2481"></a><a name="iddle2835"></a><a name="iddle2991"></a><a name="iddle3264"></a><a name="iddle3405"></a><a name="iddle3787"></a><a name="iddle4042"></a><a name="iddle4176"></a><a name="iddle4177"></a><a name="iddle4437"></a><a name="iddle4570"></a><a name="iddle4718"></a><a name="iddle4812"></a><a name="iddle4813"></a><a name="iddle5042"></a><a name="iddle5634"></a><a name="iddle5636"></a><a name="iddle5638"></a><a name="iddle5643"></a><a name="iddle5644"></a><a name="iddle5645"></a><a name="iddle5647"></a><a name="iddle5648"></a><a name="iddle5649"></a><a name="iddle5931"></a><a name="iddle5945"></a><a name="iddle6050"></a><a name="iddle6971"></a><a name="iddle6977"></a><a name="iddle6979"></a><a name="iddle7288"></a>Qtopia Core provides the following classes for interfacing with input and output devices and for customizing the look and feel of the window system:</p>
<p><table cellspacing="0" class="allBorders" border="1" RULES="all" cellpadding="4"><colgroup align="left" span="2"><col width="150"><col width="150"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">Class</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Base class for</p></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QScreen</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">screen drivers</p></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>QScreenDriverPlugin</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">screen driver plugins</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QWSMouseHandler</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">mouse drivers</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QMouseDriverPlugin</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">mouse driver plugins</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QWSKeyboardHandler</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">keyboard drivers</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QKbdDriverPlugin</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">keyboard driver plugins</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QWSInputMethod</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">input methods</p></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>QDecoration</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">window decoration styles</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>QDecorationPlugin</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">plugins providing window decoration styles</P></TD></tr></table></p><br>
<p class="docText">To obtain the list of predefined drivers, input methods, and window decoration styles, run the <tt>configure</tt> script with the <tt>-help</tt> option.</p>
<p class="docText">The screen driver can be specified using the <tt>-display</tt> command-line option when starting the Qtopia Core server, as seen in the previous section, or by setting the <tt>QWS_DISPLAY</tt> environment variable. The mouse driver and the associated device can be specified using the <tt>QWS_MOUSE_PROTO</tt> environment variable, whose value must have the syntax <span class="docEmphasis">type</span> :<span class="docEmphasis">device</span>, where <span class="docEmphasis">type</span> is one of the supported drivers and <tt>device</tt> the path to the device (for example, <tt>QWS_MOUSE_PROTO=IntelliMouse:/dev/mouse</tt>). Keyboards are handled similarly through the <tt>QWS_KEYBOARD</tt> environment variable. Input methods and window decorations are set programmatically in the server using <tt>QWSServer::setCurrentInputMethod()</tt> and <tt>QApplication::qwsSetDecoration()</tt>.</P>
<p class="docText">Window decoration styles can be set independently of the widget style, which inherits from <tt>QStyle</tt>. For example, it is entirely possible to set Windows as the window decoration style and Plastique as the widget style. If desired, decorations can be set on a per-window basis.</p>
<p class="docText">The <tt>QWSServer</tt> class provides various functions for customizing the window system. Applications that run as Qtopia Core servers can access the unique <tt>QWSServer</tt> instance through the <tt>qwsServer</tt> global variable, which is initialized by the <tt>QApplication</tt> constructor.</p>
<p class="docText">Qtopia Core supports the following font formats: TrueType (TTF), PostScript Type 1, Bitmap Distribution Format (BDF), and Qt Pre-rendered Fonts (QPF).</P>
<p class="docText">Because QPF is a raster format, it is faster and usually more compact than vector formats such as TTF and Type 1 if we need it only at one or two different sizes. The <tt>makeqpf</tt> tool lets us pre-render a TTF or a Type 1 file and save the result in QPF format. An alternative is to run our applications with the <tt>-savefonts</tt> command-line option.</p>
<p class="docText">At the time of writing, Trolltech is developing an additional layer on top of Qtopia Core to make embedded application development even faster and more convenient. It is hoped that a later edition of this book will include more information on this topic.</P>

<a href="21021536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch21lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=app01.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style="display:none"><center><a href="http://sourceforge.net/donate/index.php?group_id=186258"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>|<script src='http://s34.cnzz.com/stat.php?id=626330&web_id=626330&show=pic2' language='JavaScript' charset='gb2312'></script></center></script></div></body></html>